<!DOCTYPE html>
<html>
<head>
    <title>Your Profile</title>
    <style>
        .progress-bar-container {
            width: 300px;
            height: 25px;
            background-color: #ddd;
            border-radius: 5px;
            overflow: hidden;
        }

        .progress-bar-fill {
            height: 100%;
            background-color: #4caf50;
            width: {{ xp_progress }}%;
            line-height: 25px;
            color: white;
            text-align: center;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>{{ character.name }}'s profile</h1>
    <p><strong>Class:</strong> {{ character.get_character_class_display }}</p>
    <p><strong>Level:</strong> {{ character.level }}</p>
    <p><strong>XP:</strong> {{ character.experience }} / {{ character.level|add:"0" }}00</p>
    <h2>Stats</h2>
    <ul>
        <li><strong>Strength:</strong> {{ character.total_strength }} (base: {{ character.strength }})</li>
        <li><strong>Intelligence:</strong> {{ character.total_intelligence }} (base: {{ character.intelligence }})</li>
        <li><strong>Agility:</strong> {{ character.total_agility }} (base: {{ character.agility }})</li>
        <li><strong>Luck:</strong> {{ character.total_luck }} (base: {{ character.luck }})</li>
    </ul>
    <p><strong>Gold:</strong> {{ character.gold }} 🪙</p>
    <h3>Equipped Gear</h3>
    <ul>
    {% for slot in equipped_items %}
        <li>
        <strong>{{ slot.label }}:</strong>
        {% if slot.item %}
            {{ slot.item.name }}
            <a href="{% url 'unequip_item' slot.slot %}">[Unequip]</a>
        {% else %}
            None
        {% endif %}
        </li>
    {% endfor %}
    </ul>

    <ul>
        <a href="{% url 'inventory' %}" class="button">🎒 Open Inventory</a>
        <a href="{% url 'shop' %}" class="button">🛒 Open Shop</a>
        <a href="{% url 'quest_list' %}">📜 View Available Quests</a>
        <a href="{% url 'quest_log' %}">📖 Quest Log</a>
    </ul>

    <div class="progress-bar-container">
        <div class="progress-bar-fill">
            {{ xp_progress }}%
        </div>
    </div>
    
    {% if character.stat_points > 0 %}
    <p><a href="{% url 'allocate_stats' %}">➕ Allocate {{ character.stat_points }} stat points</a></p>
    {% endif %}

    <p><a href="{% url 'quiz' %}">🔁 Back to Quiz</a></p>
</body>
</html>
